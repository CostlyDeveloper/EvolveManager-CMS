

var $=jQuery.noConflict();jQuery(document).ready(function(b){var a="video";var c="modules/"+a+"/";b(document).on("click touchstart","#add_new_video",function(f){f.preventDefault();var e="btn-blue";var h=lang.videoTitleNew;var d="url:"+c+"confirmBox/add_video.php";var g;b.confirm({title:h,content:d,buttons:{formSubmit:{text:lang.commonCreateButton,btnClass:e,action:function(){var l=[];var i=b("#pub_type_id").val();b(".video_lang").each(function(){langSlug=b(this).attr("id").split("_")[1];videoTitle=b(this).val();l.push({slug:langSlug,title:videoTitle})});var m=JSON.stringify(l);var k=b("#moduleID").val();var n=b("#videoURL").val();var j=b("#token_data");var o={moduleID:k,data:m,videoURL:n,pub_type_id:i};o=j.serialize()+"&"+b.param(o);b.ajax({type:"POST",dataType:"json",url:c+"actions/add_video.php",data:o,cache:false,success:function(p){showMessage("success","","");window.setTimeout(window.location.replace(p.load_video_url),500)},error:function(p){showMessage("error","","")}})}},cancel:function(){},},onContentReady:function(){}})});b(".publish_switch").change(function(i){i.preventDefault();var h=b(this).attr("data-id");if(b(this).prop("checked")){var k=1}else{var k=0}var f=b("#moduleID").val();var j=b("#videoURL").val();var d=b("#token_data");var g={moduleID:f,instanceID:h,published:k};g=d.serialize()+"&"+b.param(g);b.ajax({type:"POST",url:c+"actions/publish.php",data:g,success:function(e){showMessage("success","","")},error:function(e){showMessage("error","","")}});return false});b(".featured_switch").change(function(i){i.preventDefault();var h=b(this).attr("data-id");if(b(this).prop("checked")){var k=1}else{var k=0}var f=b("#moduleID").val();var j=b("#videoURL").val();var d=b("#token_data");var g={moduleID:f,instanceID:h,featured:k};g=d.serialize()+"&"+b.param(g);b.ajax({type:"POST",url:c+"actions/featured.php",data:g,success:function(e){showMessage("success","","")},error:function(e){showMessage("error","","")}});return false});b(document).on("submit","#edit_video_form",function(){var d=b("#edit_video_form, #token_data");b.ajax({type:"POST",url:c+"actions/edit_video.php",data:d.serialize(),success:function(e){showMessage("success","","")},error:function(e){showMessage("error","","");window.setTimeout("location.reload()",1000)}});return false})});

