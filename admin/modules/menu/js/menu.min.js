

var $=jQuery.noConflict();var modulep="menu";var modulePath="modules/"+modulep+"/";function sort_position(){var d=$("#moduleID").val();var b=$("input[name=userID").val();var c=$("input[name=token").val();var e=$("input[name=cpass").val();var a=$("input[name=rdts").val();$("ol.sortable").nestedSortable({forcePlaceholderSize:true,handle:"div",helper:"clone",items:"li",opacity:0.6,placeholder:"placeholder",revert:250,tabSize:25,tolerance:"pointer",toleranceElement:"> div",maxLevels:4,isTree:true,expandOnHover:700,startCollapsed:false,excludeRoot:true,update:function(){hiered=$(this).nestedSortable("toHierarchy",{startDepthCount:0}),$.post(modulePath+"actions/sort.php",{moduleID:d,userID:b,token:c,cpass:e,rdts:a,array:hiered},function(f){$("#sort_data").html(f)})}})}jQuery(document).ready(function(a){a(document).on("click touchstart",".edit_menu_item",function(c){c.preventDefault();var i=a(this).attr("data-id");var f=a("#moduleID").val();var j=a("#token_data");var e={moduleID:f,id:i};e=j.serialize()+"&"+a.param(e);var g="btn-blue";var b=lang.commonEdit;var d="url:"+modulePath+"confirmBox/edit_menu_item.php?"+e;var h;a.confirm({title:b,content:d,buttons:{formSubmit:{text:lang.commonSubmit,btnClass:g,action:function(){var k=a("#menu_item_form, #token_data, #menu_form");a.ajax({type:"POST",url:modulePath+"actions/edit_instance.php",data:k.serialize(),cache:false,success:function(l){showMessage("success","","");a("#name_"+i).html(l)},error:function(l){showMessage("error","","")}})}},cancel:function(){},},onContentReady:function(){}})});a(document).on("click touchstart","#add_new_menu_item",function(e){e.preventDefault();var d=a(this).attr("data-id");var c=a("#moduleID").val();var b=a("#token_data");var f={moduleID:c,instanceID:d};f=b.serialize()+"&"+a.param(f);a.ajax({type:"POST",url:modulePath+"actions/add_menu_item.php",data:f,success:function(g){showMessage("success","","");a(".sortable").prepend(g)},error:function(g){showMessage("error","","")}})});a(document).on("click touchstart",".del_inst",function(){var b=a(this).attr("data-id");var c="btn-red";var d=lang.commonDelIns;a.confirm({title:d,icon:"fa fa-warning",content:lang.commonDelText,type:"red",buttons:{formSubmit:{text:lang.commonDelButton,btnClass:c,action:function(){var f=a("#moduleID").val();var e=a("#token_data");var g={moduleID:f,instanceID:b};g=e.serialize()+"&"+a.param(g);a.ajax({type:"POST",url:modulePath+"actions/delete_instance.php",data:g,success:function(h){a('li[id="item_'+b+'"]').fadeOut(1000).remove();showMessage("success","","")},error:function(h){showMessage("error","","")}})}},cancel:function(){},},onContentReady:function(){}})});a("#get_menu").on("change",function(){var b=this.value;a.ajax({type:"POST",url:modulePath+"actions/get_menu.php",data:{id:b},success:function(c){showMessage("success","","");a("#strings_append").empty();a("#strings_append").append(c);sort_position()}});return false})});

