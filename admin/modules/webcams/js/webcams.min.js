

jQuery(document).ready(function(c){function i(){c("#webcams-responsive").DataTable({responsive:false,columnDefs:[{className:"all",orderable:false,targets:0},{responsivePriority:1,targets:0},{responsivePriority:2,targets:1}]})}var d="webcams";var k="modules/"+d+"/";var g="modules/_commonScripts/";var b=10;var f=c(".fields");var a=c(".add_field");var j=c("input[name=instanceID]").val();var e=c(".added_wids");if(e.length){var h=e.length+1}else{var h=1}c(a).click(function(l){l.preventDefault();c.ajax({type:"POST",data:{count:h,instanceID:j},cache:false,url:k+"actions/add_multi_stream.php",success:function(m){if(h<b){if(!c(".added_wids").length){c("#single_stream").addClass("hidden");c("input[name=single_stream]").attr("disabled",true)}c(f).append(m);h++}},});return false});c(f).on("click",".remove_field",function(l){l.preventDefault();c(this).parent().parent().parent(".added_wids").remove();if(!c(".added_wids").length){c("#single_stream").removeClass("hidden");c("input[name=single_stream]").attr("disabled",false)}h--});c("#make_historic").on("ifChecked",function(l){l.preventDefault();c("#f_date").attr("readonly",false)});c("#make_historic").on("ifUnchecked",function(l){l.preventDefault();c("#f_date").attr("readonly",true)});c(".webcam_categories").select2();c(".publish_switch").change(function(p){p.preventDefault();var n=c(this).attr("data-id");if(c(this).prop("checked")){var q=1}else{var q=0}var m=c("#moduleID").val();var l=c("#token_data");var o={moduleID:m,instanceID:n,published:q};o=l.serialize()+"&"+c.param(o);c.ajax({type:"POST",url:k+"actions/publish.php",data:o,success:function(r){showMessage("success","","")},error:function(r){showMessage("error","","")}});return false});c(document).on("click touchstart",".feature_switch",function(r){r.preventDefault();var o=c(this).attr("data-id");var n="fa-heart";var p="featured";if(c(this).hasClass(n)){var s=0}else{var s=1}var m=c("#moduleID").val();var l=c("#token_data");var q={moduleID:m,instanceID:o,featured:s};q=l.serialize()+"&"+c.param(q);c.ajax({type:"POST",url:k+"actions/featured.php",data:q,success:function(u){var t=c("#webcams-responsive").DataTable();if(s==0){t.cell("#instanceID_"+o+" ."+p).data('<span class="hidden_text">0</span><i data-id="'+o+'" class="pointer feature_switch fa '+n+'-o" aria-hidden="true"></i>')}else{if(s==1){t.cell("#instanceID_"+o+" ."+p).data('<span class="hidden_text">1</span><i data-id="'+o+'" class="pointer feature_switch fa '+n+'" aria-hidden="true"></i>')}}showMessage("success","","")},});return false});c(document).on("click touchstart",".promote_switch",function(s){s.preventDefault();var o=c(this).attr("data-id");var n="fa-star";var p="promoted";if(c(this).hasClass(n)){var r=0}else{var r=1}var m=c("#moduleID").val();var l=c("#token_data");var q={moduleID:m,instanceID:o,promoted:r};q=l.serialize()+"&"+c.param(q);c.ajax({type:"POST",url:k+"actions/promoted.php",data:q,success:function(u){var t=c("#webcams-responsive").DataTable();if(r==0){t.cell("#instanceID_"+o+" ."+p).data('<span class="hidden_text">0</span><i data-id="'+o+'" class="pointer promote_switch fa '+n+'-o" aria-hidden="true"></i>')}else{if(r==1){t.cell("#instanceID_"+o+" ."+p).data('<span class="hidden_text">1</span><i data-id="'+o+'" class="pointer promote_switch fa '+n+'" aria-hidden="true"></i>')}}showMessage("success","","")},error:function(t){showMessage("error","","")}});return false});c(document).on("submit","#edit_webcam_form",function(){var l=c("#edit_webcam_form, #token_data");c.ajax({type:"POST",dataType:"json",url:k+"actions/edit_webcam.php",data:l.serialize(),success:function(m){c.each(m,function(n,o){c("input[name="+n+"]").val(o);c("input[name="+n+"]").removeClass("parsley-error")});showMessage("success","","");if(c(".unsaved").length){c(".unsaved").fadeOut()}},error:function(m){showMessage("error","","")}});return false});c("#wcats_dragable").sortable({items:"tr",placeholder:"placeholder_dragable",update:function(){var m=c("#moduleID").val();var l=c("#token_data");var o=c("#wcats_dragable");var n={moduleID:m};n=o.serializeTree("data-id","postData")+"&"+l.serialize()+"&"+c.param(n);c.ajax({type:"POST",url:k+"actions/input_new_wcam_order.php",data:n,success:function(p){showMessage("success","","");c("#dev").html(p)},error:function(p){showMessage("error","","")}})}}).disableSelection();c("#stream_dragable").sortable({items:"li",placeholder:"placeholder_dragable",update:function(){var m=c("#moduleID").val();var l=c("#token_data");var o=c("#stream_dragable");var n={moduleID:m};n=o.serializeTree("data-id","postData")+"&"+l.serialize()+"&"+c.param(n);c.ajax({type:"POST",url:k+"actions/input_new_multiple_stream.php",data:n,success:function(p){showMessage("success","","");c("#dev").html(p)},error:function(p){showMessage("error","","")}})}}).disableSelection();c(document).on("submit","#edit_wcat_form",function(){var l=c("#edit_wcat_form, #token_data");c.ajax({type:"POST",dataType:"json",url:k+"actions/edit_wcat.php",data:l.serialize(),success:function(m){c.each(m,function(n,o){c("input[name="+n+"]").val(o)});showMessage("success","","")},error:function(m){showMessage("error","","")}});return false});c("#publishing_date").datetimepicker({format:"DD.MM.YYYY."});c("#finishing_date").datetimepicker({format:"DD.MM.YYYY."});c(document).on("click touchstart","#add_new_webcam",function(n){n.preventDefault();var m="btn-blue";var p=lang.commonCreateNew;var l="url:"+k+"confirmBox/add_webcam.php";var o;c.confirm({title:p,content:l,buttons:{formSubmit:{text:lang.commonCreateButton,btnClass:m,action:function(){var s=[];c(".lang").each(function(){langSlug=c(this).attr("id").split("_")[1];p=c(this).val();s.push({slug:langSlug,title:p})});var t=JSON.stringify(s);var r=c("#moduleID").val();var u=c("#videoURL").val();var q=c("#token_data");var v={moduleID:r,data:t};v=q.serialize()+"&"+c.param(v);c.ajax({type:"POST",dataType:"json",url:k+"actions/add_webcam.php",data:v,cache:false,success:function(w){showMessage("success","","");window.setTimeout(window.location.replace(w.load_new),500)},error:function(w){showMessage("error","","")}})}},cancel:function(){},},onContentReady:function(){}})});if(c("#webcams-responsive").length>0){i()}});

