var $=jQuery.noConflict();jQuery(document).ready(function(e){var a="modules/articles/";if(e("#activate_schedule").length){e("#activate_schedule").iCheck("enable");var t=document.querySelector(".publish-sw");new Switchery(t,{color:"#26B99A"})}e("#activate_schedule").on("ifUnchecked",function(t){e("input[name=art_schedule]").prop("disabled",!1),e("#sch_cal_ico").fadeIn();var s=e("input[name=articleID]").val(),r=e("input[name=art_schedule").val();return e.ajax({type:"POST",url:a+"actions/schedule.php",data:{articleID:s,schedule:0,art_schedule:r},success:function(a){showMessage("success","",lang.articleScheduleUnset),e("#art_schedule").removeClass("parsley-success"),e("#sch_paravan").addClass("hidden"),e("input[name=art_schedule]").removeClass("hidden")}}),!1}),e("#activate_schedule").on("ifChecked",function(t){e("input[name=art_schedule]").prop("disabled",!0),e("#sch_cal_ico").fadeOut();var s=e("input[name=articleID]").val(),r=e("input[name=art_schedule]").val();return e.ajax({type:"POST",url:a+"actions/schedule.php",data:{articleID:s,schedule:1,art_schedule:r},success:function(a){showMessage("success","",lang.articleScheduleSet),e("#art_schedule").addClass("parsley-success")}}),!1}),e(".publish_switch").change(function(t){if(t.preventDefault(),e(this).prop("checked"))var s=1;else s=0;var r=e(this).attr("data-id");document.getElementById("schedule_parent")&&e("#schedule_parent").fadeToggle("slow","linear");var c={moduleID:e("#moduleID").val(),articleID:r,published:s};return c=e("#token_data").serialize()+"&"+e.param(c),e.ajax({type:"POST",url:a+"actions/publish.php",data:c,success:function(e){showMessage("success","","")},error:function(e){showMessage("error","","")}}),!1}),e(document).on("submit","#edit_rubric_form",function(){var t=e("#edit_rubric_form, #token_data");return e.ajax({type:"POST",dataType:"json",url:a+"actions/edit_rubric.php",data:t.serialize(),success:function(a){e.each(a,function(a,t){e("input[name="+a+"]").val(t)}),showMessage("success","","")},error:function(e){showMessage("error","","")}}),!1}),e(document).on("click touchstart","#add_new_art_rubric",function(t){t.preventDefault();var s=e("#token_data"),r={moduleID:e("#moduleID").val()};r=s.serialize()+"&"+e.param(r),e.ajax({type:"POST",dataType:"json",url:a+"actions/add_rubric.php",data:r,cache:!1,success:function(e){showMessage("success","",""),window.setTimeout(window.location.replace(e.load_new),500)},error:function(e){showMessage("error","","")}})}),e(document).on("submit","#edit_article_form",function(){var t=e("#edit_article_form, #token_data");return e.ajax({type:"POST",dataType:"json",url:a+"actions/edit_article.php",data:t.serialize(),success:function(a){showMessage("success","",""),e.each(a,function(a,t){e("input[name="+a+"]").val(t)}),e(".unsaved").length&&e(".unsaved").fadeOut()},error:function(e){showMessage("error","","")}}),!1}),e(document).on("click touchstart","#add_new_article",function(t){t.preventDefault();var s=lang.articleCreateNew;e.confirm({title:s,content:"url:modules/articles/confirmBox/add_article.php",buttons:{formSubmit:{text:lang.articleNewButton,btnClass:"btn-blue",action:function(){var t=[];e(".article_lang").each(function(){langSlug=e(this).attr("id").split("_")[1],articleTitle=e(this).val(),t.push({slug:langSlug,title:articleTitle})});var s=e("#moduleID").val(),r=e("#rubric_id").val(),c=JSON.stringify(t),n=e("#token_data"),i={data:c,moduleID:s,rubric:r};dat=n.serialize()+"&"+e.param(i),e.ajax({type:"POST",dataType:"json",url:a+"actions/add_article.php",data:dat,cache:!1,success:function(e){showMessage("success","",""),window.setTimeout(window.location.replace(e.load_new),500)},error:function(e){showMessage("error","","")}})}},cancel:function(){}},onContentReady:function(){}})}),e("#datatable-responsive").DataTable({responsive:!1,columnDefs:[{className:"all",orderable:!1,targets:0},{className:"all",orderable:!1,targets:1},{responsivePriority:1,targets:0},{responsivePriority:2,targets:1}]}),e("#ddatatable-responsive").DataTable({columnDefs:[{targets:"disable_sorting",orderable:!1}]}),e("#datetimepicker_article_publishing").datetimepicker({format:"DD.MM.YYYY. HH:mm"}),e("#art_schedule").datetimepicker({format:"DD.MM.YYYY. HH:mm"}),e(".seoid").blur(function(){e.trim(this.value).length||e(this).addClass("parsley-error")})});